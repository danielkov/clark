We want to build an ATS (applicant tracking system), enriched by AI features. We use NextJS as a full-stack app and WorkOS for authentication. Our source of truth and frontend are Linear integration that the user connects after they create their account.

System Context & Architecture

App Framework: NextJS (Full-stack)

Authentication: WorkOS

Source of Truth: Linear

AI & Backend Layer: LiquidMetal (Raindrop Platform)

Object Mapping:

Linear Initiative: The specific "Hiring" container for the organization.

Linear Project: A specific Job Opening (e.g., "Senior Frontend Engineer").

Linear Issue: An Applicant/Candidate.

Linear Document: Tone of Voice guides, CVs, and Cover Letters.

1. Onboarding & Configuration

Focus: Account creation and establishing the link to Linear.

1.1 When an unauthenticated user accesses the application, the System shall present the WorkOS login/signup interface (Social, Email, or Password).

1.2 When a user successfully authenticates via WorkOS, the System shall prompt the user to authorize the Linear integration.

1.3 When the Linear integration is authorized, the System shall fetch a list of existing Linear Initiatives.

1.4 When the list of Initiatives is displayed, the System shall allow the user to select an existing Initiative or create a new one to serve as the "ATS Container."

1.5 When the "ATS Container" Initiative is established, the System shall generate a default "Tone of Voice" document within that Initiative if one does not already exist.

2. Job Board Management (Project Sync)

Focus: Managing job listings based on Linear Project states.

2.1 When a Linear Project linked to the ATS Initiative is set to status "In Progress", the System shall publish the project as a Job Listing on the public website.

2.2 While a Linear Project status is anything other than "In Progress" (e.g., Backlog, Canceled, Completed), the System shall hide the Job Listing from the public website.

2.3 When a Project is detected as "In Progress", the System shall check for the presence of a specific label (e.g., ai-generated).

2.4 If the ai-generated label is missing on an "In Progress" Project, the System shall trigger the LLM to generate a structured Job Description.

Input: The existing Project Description and the Initiative's "Tone of Voice" document.

2.5 When the Job Description is successfully generated, the System shall update the Linear Project description with the new content and append the ai-generated label to the Project.

2.6 When a user manually updates a Project description in Linear, the System shall synchronize the changes to the public Job Listing immediately.

3. Candidate Application

Focus: Ingesting data from the website into Linear.

3.1 When an applicant submits the application form on the website, the System shall validate the input fields (Name, Email, CV).

3.2 When validation passes, the System shall create a new Linear Issue within the specific Project associated with the Job Listing.

3.3 When creating the Issue, the System shall upload the applicant's CV and cover letter as attachments linked to the Linear Issue.

3.4 When the Issue is created, the System shall set the initial state to "Triage" (or the default entry state defined in Linear).

4. AI Pre-Screening & Automation

Focus: processing candidates using AI logic.

4.1 When a new Issue (Candidate) is created in an "In Progress" Project, the System shall trigger the AI Pre-screening Agent.

4.2 The System shall compare the Candidate's details (CV/Resume) against the generated Job Description associated with the Project.

4.3 If the AI determines a Definite Match (High Confidence), the System shall move the Linear Issue to the "Screening" workflow state.

4.4 If the AI determines a Definite Mismatch (Low Confidence/Rejection), the System shall move the Linear Issue to the "Declined" workflow state.

4.5 If the AI determines an Unsure/Ambiguous Match, the System shall leave the Linear Issue in the "Triage" workflow state for manual review.

4.6 When the AI moves an Issue, the System shall add an internal comment to the Issue summarizing the AI's reasoning (e.g., "Matched due to 5 years React experience").

5. AI Service Implementation (LiquidMetal)

Focus: Technical mapping of requirements to LiquidMetal services.

5.1 (Knowledge Base): The System shall use LiquidMetal SmartBuckets to store and index "Tone of Voice" documents and Applicant CVs.

Mechanism: Uploading a file to SmartBuckets automatically generates vector embeddings, enabling semantic search and retrieval during the screening process.

5.2 (Inference Engine): The System shall use LiquidMetal SmartInference to drive the LLM logic for Job Description generation (Requirement 2.4) and Candidate Screening (Requirement 4.2).

Benefit: Provides a unified API to swap models (e.g., Llama 3, GPT-4) without changing application code.

5.3 (Data Flow): The System shall implement a "Hybrid State" architecture:

Step A: NextJS receives the file upload from the user.

Step B: NextJS streams the file to SmartBuckets (for AI processing).

Step C: NextJS stores the public URL/Reference in the Linear Issue (for human recruiter access).

## Docs

WorkOS docs for NextJS: https://workos.com/docs/authkit/nextjs
Linear SDK docs: https://linear.app/developers/sdk
Linear OAuth 2 (actor): https://linear.app/developers/oauth-actor-authorization
LiquidMetal docs: https://docs.liquidmetal.ai/llms.txt